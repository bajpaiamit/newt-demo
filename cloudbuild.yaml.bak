steps:
- name: 'gcr.io/cloud-builders/docker'
  args: ['build',
         '--build-arg',
         "build_env=${_ENV}",
         '-t',
         '${_REGION}-docker.pkg.dev/$PROJECT_ID/${_DOCKER_REPO}/${_ENV}:tag1',
         '.']
images:
       - '${_REGION}-docker.pkg.dev/$PROJECT_ID/${_DOCKER_REPO}/${_ENV}:tag1'

options:
  logging: CLOUD_LOGGING_ONLY

/*
steps:
# Terraform init
- id: 'tf init'
  name: 'hashicorp/terraform:1.0.0'
  entrypoint: 'sh'
  args:
  - '-c'
  - |
      echo "########## TERRAFORM INIT #############"
      terraform init
# Terraform plan
- id: 'tf plan'
  name: 'hashicorp/terraform:1.0.0'
  entrypoint: 'sh'
  args:
  - '-c'
  - |
      echo "########## TERRAFORM PLAN #############"
      terraform plan
#Terraform apply
- id: 'tf apply'
  name: 'hashicorp/terraform:1.0.0'
  entrypoint: 'sh'
  args:
  - '-c'
  - |
      echo "########## TERRAFORM APPLY #############"
      terraform apply -auto-approve
timeout: 2400s
options:
  logging: CLOUD_LOGGING_ONLY
*/
  substitutions:
  _ENV:"hello"
  _REGION: "us-central1"
  _DOCKER_REPO: "cloud-run-repo"
  _PROJECT_ID: "noc-test-project"